<!doctype html>
<html lang="th">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ติดตามผลเลือกตั้ง 69 รายเขต</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@400;600;800&family=IBM+Plex+Mono:wght@400;600&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="./vendor/leaflet.css" />
    <link rel="stylesheet" href="./styles.css?v=warm-k16-r2" />
  </head>
  <body>
    <div class="bg-orb orb-a"></div>
    <div class="bg-orb orb-b"></div>
    <header class="hero">
      <p class="eyebrow">เลือกตั้งประเทศไทย 69</p>
      <h1>ติดตามการอ่านผลคะแนนระดับเขต</h1>
      <p id="generatedAt" class="sub">กำลังโหลดข้อมูลล่าสุด...</p>
      <div class="source-note">
        <p>ECT เป็นข้อมูลจากเว็บรายงานผลคะแนนแบบไม่เป็นทางการของ กกต.</p>
        <p>Vote62 เป็นข้อมูลภาคอาสาสมัคร (ภาพหน่วยเลือกตั้ง) อาจคลาดเคลื่อนจากผลทางการอย่างมีนัยสำคัญ</p>
        <p>Killernay เป็นข้อมูลจากการอ่านรายงานผลคะแนนแบบเป็นทางการของ กกต. โดย @killernay</p>
      </div>
    </header>

    <main>
      <section class="panel view-tabs" id="viewTabs">
        <button class="tab active" data-view="all">ทั้งหมด</button>
        <button class="tab" data-view="party_list">บัญชีรายชื่อ</button>
        <button class="tab" data-view="constituency">แบ่งเขต</button>
        <button class="tab" data-view="missing_read">ยังไม่มีไฟล์/ผลอ่าน</button>
      </section>

      <section class="kpis" id="kpiGrid"></section>

      <section class="panel view-tabs" id="sectionTabs">
        <button class="tab active" data-section="overview">ภาพรวม</button>
        <button class="tab" data-section="compare">เทียบแหล่งข้อมูล</button>
        <button class="tab" data-section="irregularity">ความผิดปกติ</button>
        <button class="tab" data-section="skew">เขย่งรายเขต</button>
      </section>

      <section class="panel filters" data-section-pane="overview">
        <input id="searchInput" placeholder="ค้นหา จังหวัด / เขต / ไฟล์" />
        <select id="provinceSelect"><option value="">ทุกจังหวัด</option></select>
        <select id="formSelect">
          <option value="">ทุกแบบฟอร์ม</option>
          <option value="constituency">แบ่งเขต</option>
          <option value="party_list">บัญชีรายชื่อ</option>
        </select>
        <select id="qualitySelect">
          <option value="">ทุกระดับคุณภาพ</option>
          <option value="strong">สรุปชัดเจน</option>
          <option value="weak">สรุปอ่อน</option>
          <option value="ocr_exact">OCR ตรงเป๊ะ</option>
        </select>
      </section>

      <section class="split-grid" data-section-pane="overview">
        <section class="panel">
          <div class="table-head">
            <h2>ข้อมูลรายเขต</h2>
            <span id="rowCount">0 รายการ</span>
          </div>
          <div class="table-wrap table-wrap-main">
            <table>
              <thead>
                <tr>
                  <th>จังหวัด / เขต</th>
                  <th>ประเภท</th>
                  <th>บัตรดี (อ่านได้)</th>
                  <th>บัตรดี (ECT)</th>
                  <th>บัตรดี (vote62)</th>
                  <th>บัตรดี (killernay)</th>
                  <th>ส่วนต่าง</th>
                  <th>สถานะ</th>
                </tr>
              </thead>
              <tbody id="tableBody"></tbody>
            </table>
          </div>
        </section>

        <section class="panel detail-panel" id="detailPanel">
          <div class="table-head">
            <h2 id="detailTitle">รายละเอียดรายเขต</h2>
            <span id="detailMeta">เลือกหนึ่งรายการเพื่อดูรายละเอียด</span>
          </div>
          <div class="compare-meta" id="detailCompareMeta"></div>
          <div class="table-wrap table-wrap-detail">
            <table>
              <thead>
                <tr>
                  <th>ลำดับ</th>
                  <th>ชื่อ</th>
                  <th>อ่านได้</th>
                  <th>ECT</th>
                  <th>vote62</th>
                  <th>killernay</th>
                </tr>
              </thead>
              <tbody id="detailBody"></tbody>
            </table>
          </div>
        </section>
      </section>

      <section class="panel" data-section-pane="compare">
        <div class="table-head">
          <h2>ช่องว่างข้อมูล (รายเขต/ประเภท)</h2>
          <span id="coverageCount">0 รายการ</span>
        </div>
        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>จังหวัด / เขต</th>
                <th>ประเภท</th>
                <th>อ่านได้</th>
                <th>ECT</th>
                <th>vote62</th>
                <th>killernay</th>
              </tr>
            </thead>
            <tbody id="coverageBody"></tbody>
          </table>
        </div>
      </section>

      <section class="panel" data-section-pane="irregularity">
        <div class="table-head">
          <h2>สัญญาณผิดปกติ</h2>
          <span id="irregularityCount">0 รายการ</span>
        </div>
        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>จังหวัด / เขต</th>
                <th>ประเภท</th>
                <th>ระดับ</th>
                <th>ช่วงต่างบัตรดี</th>
                <th>% บัตรเสีย+ไม่เลือก (อ่านได้)</th>
                <th>ธงเตือน</th>
              </tr>
            </thead>
            <tbody id="irregularityBody"></tbody>
          </table>
        </div>
      </section>

      <section class="panel" data-section-pane="irregularity">
        <div class="table-head">
          <h2>สรุปความผิดปกติรายจังหวัด</h2>
          <span id="heatmapCount">0 จังหวัด</span>
        </div>
        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>จังหวัด</th>
                <th>รวมผิดปกติ</th>
                <th>P1</th>
                <th>P2</th>
                <th>P3</th>
              </tr>
            </thead>
            <tbody id="heatmapBody"></tbody>
          </table>
        </div>
      </section>

      <section class="panel" data-section-pane="skew">
        <div class="table-head">
          <h2>เขย่งรายเขต (ค่าหลัก)</h2>
          <span id="skewCount">0 รายการ</span>
        </div>
        <div id="skewSummary" class="skew-summary">กำลังคำนวณ...</div>
        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>จังหวัด / เขต</th>
                <th>รวมแบ่งเขต</th>
                <th>รวมบัญชีรายชื่อ</th>
                <th>ส่วนต่าง (+/-)</th>
                <th>ส่วนต่าง %</th>
                <th>ทิศทาง</th>
                <th>เสีย (แบ่งเขต)</th>
                <th>ไม่เลือก (แบ่งเขต)</th>
                <th>เสีย (บัญชีรายชื่อ)</th>
                <th>ไม่เลือก (บัญชีรายชื่อ)</th>
              </tr>
            </thead>
            <tbody id="skewBody"></tbody>
          </table>
        </div>
      </section>

      <section class="panel" data-section-pane="skew">
        <div class="table-head">
          <h2>แผนที่เขย่งรายเขต (ลงสีรายเขต)</h2>
          <span id="skewMapCount">0 เขต</span>
        </div>
        <div id="skewMap" class="skew-map"></div>
      </section>

      <section class="panel" data-section-pane="compare">
        <div class="table-head">
          <h2>รายการต่างสูงสุด (บัตรดี)</h2>
          <span id="mismatchCount">0 รายการ</span>
        </div>
        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>จังหวัด / เขต</th>
                <th>ประเภท</th>
                <th>บัตรดี (อ่านได้)</th>
                <th>บัตรดี (ECT)</th>
                <th>ΔECT</th>
                <th>บัตรดี (vote62)</th>
                <th>Δvote62</th>
              </tr>
            </thead>
            <tbody id="mismatchBody"></tbody>
          </table>
        </div>
      </section>
    </main>

    <template id="rowTemplate">
      <tr>
        <td class="mono loc"></td>
        <td class="form"></td>
        <td class="mono readValid"></td>
        <td class="mono ectValid"></td>
        <td class="mono vote62Valid"></td>
        <td class="mono killernayValid"></td>
        <td class="mono spread"></td>
        <td class="flags"></td>
      </tr>
    </template>

    <script src="./vendor/leaflet.js"></script>
    <script src="./app-k16-r1.js?v=redv15-tabs"></script>
  </body>
</html>
